<div class="message-board">
    <h1 class="title">Messages and moments <br /> that lift us up</h1>
    <p class="subtitle">
        Explore heartfelt cards, creative art, and inspiring words from people who care.
        Every message is a reminder that youâ€™re never alone on your journey.
    </p>

    <div class="tabs">
        @for (tab of tabs; track tab) {
            <button
                [class.active]="tab === activeTab()"
                (click)="selectTab(tab)">
                {{ tab }}
            </button>
        }
    </div>
    @if (!isLoading()) {
        <div class="card-grid">
            @for (card of filteredCards(); track card; let i = $index) {
                <div
                    class="card"
                    [style]="'--i: ' + ((i - (pageSize * (page() - 1))) * 0.10) + 's'">
                    <div class="card-image-wrap" (click)="openVoicePage(card.id)">
                        <img
                            class="card-image"
                            [src]="card.img"
                            alt="card image" />
                    </div>
                    <div class="card-content">
                        <div class="wrap-category">
                            @if (card.category) {
                                <span
                                    class="category"
                                    (click)="selectTab(card.category)">
                                    {{ card.category }}
                                </span>
                            }
                            @for (tag of card.what; track tag) {
                                <span 
                                    class="category"
                                    (click)="selectTab(tag)">
                                    {{ tag }}
                                </span>
                            }
                            @for (tag of card.express; track tag) {
                                <span 
                                    class="category"
                                    (click)="selectTab(tag)">
                                    {{ tag }}
                                </span>
                            }
                        </div>
                        <h2 class="card-title" (click)="openVoicePage(card.id)">{{ card.location }}</h2>
                        <!-- <p class="card-description">{{ card.author }}</p> -->
                        <!-- <div class="card-author">
                            <img class="avatar" [src]="card.avatar" alt="avatar" />
                            <div>
                                <div class="name">{{ card.author }}</div>
                                <div class="date">{{ card.date }}</div>
                            </div>
                        </div> -->
                    </div>
                </div>
            }
        </div>

        @if (isFetchingMore()) {
            <div class="infinite-loader">
              <div class="loader-wave">
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
              </div>
            </div>
        }
      
        @if (hasMore()) {
            <div #sentinel class="sentinel" aria-hidden="true"></div>
        }
    } @else {
        <div class="content">
            <div class="loader-wave">
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
                <div class="wave-dot"></div>
            </div>
        </div>
    }
</div>