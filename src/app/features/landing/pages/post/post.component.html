<div class="wrap" #wrap>
    @if (post()) {
        <div class="content">
            <div class="top" (click)="goBack()">
                <span class="material-symbols-outlined">west</span>
                Back
            </div>

            <div class="post">
                <div class="left-side">
                    <span class="tag">{{ post()?.tag }}</span>
                    <h2>{{ post()?.header }}</h2>
                    <div class="date">
                        {{ post()?.createdAt | date: 'MMM dd, y' }}
                    </div>
                </div>
            </div>
        </div>
    } @else {
        <div class="content loading">
            <div class="top">
                <span class="material-symbols-outlined">west</span>
                back
            </div>

            <div class="post">
                <div class="left-side">
                    <div class="date">Jun 23, 2023</div>
                    <h2><span>Loading…</span></h2>
                    <div class="owner">
                        <div class="img"></div>
                        <div class="owner-info">
                            <div class="name">Loading…</div>
                            <div class="sign">Loading…</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

@if (post()) {
    <div class="container">
        <div class="wrap-end-center">
            <img
                class="post-main-picture"
                [src]="post()?.mainPicture"
                [alt]="post()?.header"
                (load)="loadEnd()"
                (error)="onError()">
        </div>

        <!-- Share block -->
        <div class="wrap-end-center">
            <div class="wrap-end">
                <div class="left">
                    Share this post
                </div>
        
                <div class="right share">
                    <button
                        class="share-item"
                        type="button"
                        (click)="copyCurrentPost()"
                        [class.copied]="isCopied()"
                        [title]="post()?.header">
                        @if (!isCopied()) {
                            <img src="assets/svg/copy-icon.svg" alt="Copy">
                            Copy link
                        } @else {
                            <span class="material-symbols-outlined">library_add_check</span>
                            Copied
                        }
                    </button>
        
                    <a
                        class="share-item"
                        [href]="twitterShareLink()"
                        target="_blank"
                        rel="noopener noreferrer me"
                        aria-label="Share on X (Twitter)">
                        <img src="assets/svg/twitter.svg" alt="Twitter">
                        Twitter
                    </a>
        
                    <a
                        class="share-item"
                        [href]="facebookShareLink()"
                        target="_blank"
                        rel="noopener noreferrer me"
                        aria-label="Share on Facebook">
                        <img src="assets/svg/fb.svg" alt="Facebook">
                        Facebook
                    </a>
        
                    <a
                        class="share-item"
                        [href]="linkedinShareLink()"
                        target="_blank"
                        rel="noopener noreferrer me"
                        aria-label="Share on LinkedIn">
                        <img src="assets/svg/linkedin.svg" alt="LinkedIn">
                        LinkedIn
                    </a>
        
                    <button
                        class="share-item only-web-share"
                        type="button"
                        (click)="shareNative()"
                        title="Share via system dialog">
                        <span class="material-symbols-outlined">ios_share</span>
                        Share
                    </button>
                </div>
            </div>
        </div>

        <div class="wrap-content">
            <div class="content" [innerHTML]="post()?.htmlContent"></div>
        </div>
    </div>
}

<div class="post-background"></div>
